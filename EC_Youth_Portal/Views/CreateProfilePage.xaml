<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:EC_Youth_Portal.ViewModel"
             x:Class="EC_Youth_Portal.Views.CreateProfilePage"
             x:DataType="viewmodels:CreateProfilePageViewModel"
             BackgroundColor="#F5F5F5"
             NavigationPage.HasNavigationBar="False"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False">

    <Grid RowDefinitions="Auto,*,Auto">

            <!-- HEADER WITH PROGRESS -->
            <Frame Grid.Row="0" 
               BackgroundColor="#1E3A5F" 
               Padding="25,20,25,15" 
               CornerRadius="0"
               HasShadow="True">
                <!-- Your existing header content -->
                <VerticalStackLayout Spacing="12">
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Complete Your Profile"
                               FontSize="26"
                               FontAttributes="Bold"
                               TextColor="White"/>
                            <Label Text="{Binding CurrentStepText}"
                               FontSize="13"
                               TextColor="#94A3B8"/>
                        </VerticalStackLayout>

                        <Frame Grid.Column="1"
                           BackgroundColor="#FFA500"
                           CornerRadius="20"
                           Padding="12,8"
                           HasShadow="False"
                           VerticalOptions="Center">
                            <Label Text="{Binding ProgressPercentage}"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="White"/>
                        </Frame>
                    </Grid>

                    <Grid ColumnDefinitions="*,*,*,*,*" 
                      ColumnSpacing="8" 
                      Margin="0,8,0,0">
                        <BoxView Grid.Column="0" 
                             BackgroundColor="{Binding Step1Color}" 
                             CornerRadius="3" 
                             HeightRequest="6"/>
                        <BoxView Grid.Column="1" 
                             BackgroundColor="{Binding Step2Color}" 
                             CornerRadius="3" 
                             HeightRequest="6"/>
                        <BoxView Grid.Column="2" 
                             BackgroundColor="{Binding Step3Color}" 
                             CornerRadius="3" 
                             HeightRequest="6"/>
                        <BoxView Grid.Column="3" 
                             BackgroundColor="{Binding Step4Color}" 
                             CornerRadius="3" 
                             HeightRequest="6"/>
                        <BoxView Grid.Column="4" 
                             BackgroundColor="{Binding Step5Color}" 
                             CornerRadius="3" 
                             HeightRequest="6"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- DYNAMIC CONTENT - Only loads current section -->
            <ScrollView Grid.Row="1">
                <ContentView x:Name="SectionContainer" 
                 Padding="20"/>
            </ScrollView>

            <!-- BOTTOM ACTION BUTTONS -->
        <Frame Grid.Row="2"
               BackgroundColor="White"
               Padding="20,15"
               CornerRadius="0"
               HasShadow="True">
            <Grid ColumnDefinitions="*,*" 
                  ColumnSpacing="12"
                  RowDefinitions="Auto,Auto"
                  RowSpacing="10">

                <Button Grid.Column="0"
                        Text="â† Previous"
                        BackgroundColor="Transparent"
                        TextColor="#1E3A5F"
                        BorderColor="#1E3A5F"
                        BorderWidth="2"
                        CornerRadius="12"
                        Padding="0,14"
                        FontAttributes="Bold"
                        FontSize="15"
                        IsVisible="{Binding ShowPreviousButton}"
                        Command="{Binding PreviousCommand}"/>

                <Button Grid.Column="1"
                        Text="{Binding NextButtonText}"
                        BackgroundColor="#FFA500"
                        TextColor="White"
                        CornerRadius="12"
                        Padding="0,14"
                        FontAttributes="Bold"
                        FontSize="15"
                        Command="{Binding NextCommand}"/>

                <Button Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Text="Save as Draft"
                        BackgroundColor="Transparent"
                        TextColor="#64748B"
                        BorderColor="#E0E0E0"
                        BorderWidth="1"
                        CornerRadius="10"
                        Padding="0,12"
                        FontSize="13"
                        Command="{Binding SaveDraftCommand}"/>
            </Grid>
        </Frame>
    </Grid>
</ContentPage>
