<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:EC_Youth_Portal.ViewModel"
             x:Class="EC_Youth_Portal.Views.RegisterPage"
             BackgroundColor="White"
             NavigationPage.HasNavigationBar="False"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False">

    <Grid>

        <!-- Decorative Semi-Circles (Background) -->
        <Grid>
            <!-- Top Right Semi-Circle -->
            <Ellipse WidthRequest="180"
                     HeightRequest="180"
                     Fill="#FFA500"
                     Opacity="0.08"
                     HorizontalOptions="End"
                     VerticalOptions="Start"
                     Margin="0,-90,-90,0"/>

            <!-- Bottom Left Semi-Circle -->
            <Ellipse WidthRequest="200"
                     HeightRequest="200"
                     Fill="#1E3A5F"
                     Opacity="0.06"
                     HorizontalOptions="Start"
                     VerticalOptions="End"
                     Margin="-100,0,0,-100"/>
        </Grid>

        <!-- Main Content -->
        <ScrollView>
            <VerticalStackLayout Spacing="0">

                <!-- Header Section -->
                <VerticalStackLayout Padding="30,10,30,20"
                                    Spacing="8">

                    <!-- Back Arrow + Title Row -->
                    <HorizontalStackLayout Spacing="10"
                       VerticalOptions="Center"
                       Margin="0,0,0,10">

                        <Label Text="←"
           FontSize="28"
           TextColor="#1E3A5F"
           FontAttributes="Bold"
           VerticalOptions="Center">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnBackClicked"/>
                            </Label.GestureRecognizers>
                        </Label>

                        <Label Text="Register"
           FontSize="28"
           FontAttributes="Bold"
           TextColor="#1E3A5F"
           VerticalOptions="Center"/>
                    </HorizontalStackLayout>

                    <Label Text="Let's Get Started"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#1E3A5F"
                           HorizontalTextAlignment="Start"/>

                    <Label Text="Create your account"
                           FontSize="13"
                           TextColor="#94A3B8"
                           HorizontalTextAlignment="Start"
                           Margin="0,0,0,10"/>
                </VerticalStackLayout>

                <!-- Form Section -->
                <VerticalStackLayout Padding="30,0,30,30"
                                    Spacing="18">

                    <!-- Full Name -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Full Name"
                               FontSize="12"
                               TextColor="#1E3A5F"
                               FontAttributes="Bold"/>
                        <Border StrokeThickness="1"
                                Stroke="#E5E5E5"
                                BackgroundColor="White"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,0"
                                HeightRequest="50">
                            <Entry Placeholder="Enter your full name"
                                   Text="{Binding FullName}"
                                   TextColor="#1E3A5F"
                                   PlaceholderColor="#BDBDBD"
                                   FontSize="14"
                                   VerticalOptions="Center"
                                   BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Username -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Username"
                               FontSize="12"
                               TextColor="#1E3A5F"
                               FontAttributes="Bold"/>
                        <Border StrokeThickness="1"
                                Stroke="#E5E5E5"
                                BackgroundColor="White"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,0"
                                HeightRequest="50">
                            <Entry Placeholder="Choose a username"
                                   Text="{Binding Username}"
                                   TextColor="#1E3A5F"
                                   PlaceholderColor="#BDBDBD"
                                   FontSize="14"
                                   VerticalOptions="Center"
                                   BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Location -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="CellNumber"
                               FontSize="12"
                               TextColor="#1E3A5F"
                               FontAttributes="Bold"/>
                        <Border StrokeThickness="1"
                                Stroke="#E5E5E5"
                                BackgroundColor="White"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,0"
                                HeightRequest="50">
                            <Entry Placeholder="eg.063 844 0614"
                                   Text="{Binding CellNumber}"
                                   TextColor="#1E3A5F"
                                   PlaceholderColor="#BDBDBD"
                                   FontSize="14"
                                   VerticalOptions="Center"
                                   BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Password -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Password"
                               FontSize="12"
                               TextColor="#1E3A5F"
                               FontAttributes="Bold"/>
                        <Border StrokeThickness="1"
                                Stroke="#E5E5E5"
                                BackgroundColor="White"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,0"
                                HeightRequest="50">
                            <Entry Placeholder="Create a password"
                                   Text="{Binding Password}"
                                   IsPassword="True"
                                   TextColor="#1E3A5F"
                                   PlaceholderColor="#BDBDBD"
                                   FontSize="14"
                                   VerticalOptions="Center"
                                   BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Re-enter Password -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Re-enter Password"
                               FontSize="12"
                               TextColor="#1E3A5F"
                               FontAttributes="Bold"/>
                        <Border StrokeThickness="1"
                                Stroke="#E5E5E5"
                                BackgroundColor="White"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,0"
                                HeightRequest="50">
                            <Entry Placeholder="Confirm your password"
                                   Text="{Binding RePassword}"
                                   IsPassword="True"
                                   TextColor="#1E3A5F"
                                   PlaceholderColor="#BDBDBD"
                                   FontSize="14"
                                   VerticalOptions="Center"
                                   BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Register Button -->
                    <Button Text="Register"
                            Command="{Binding RegisterCommand}"
                            BackgroundColor="#FFA500"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            HeightRequest="52"
                            Margin="0,12,0,15"/>

                    <!-- Login Link -->
                    <HorizontalStackLayout HorizontalOptions="Center"
                                          Spacing="5"
                                          Margin="0,0,0,20">
                        <Label Text="Already have an account?"
                               FontSize="13"
                               TextColor="#757575"/>
                        <Label Text="Login"
                               FontSize="13"
                               FontAttributes="Bold"
                               TextColor="#FFA500">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding LoginCommand}"/>
                            </Label.GestureRecognizers>
                        </Label>
                    </HorizontalStackLayout>

                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Sheet Overlay -->
        <BoxView BackgroundColor="Black"
                 Opacity="{Binding OverlayOpacity}"
                 InputTransparent="{Binding IsOverlayInputTransparent}">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding OverlayTappedCommand}"/>
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Bottom Sheet Modal -->
        <Frame BackgroundColor="White"
       CornerRadius="25"
       Padding="0"
       HasShadow="True"
       VerticalOptions="End"
       TranslationY="{Binding BottomSheetTranslationY}">

            <Grid RowDefinitions="Auto,*,Auto"
          RowSpacing="0">

                <!-- Handle Bar -->
                <BoxView Grid.Row="0"
                 WidthRequest="40"
                 HeightRequest="4"
                 BackgroundColor="#E0E0E0"
                 CornerRadius="2"
                 HorizontalOptions="Center"
                 Margin="0,15"/>

                <!-- Modal Content -->
                <ScrollView Grid.Row="1"
                           MaximumHeightRequest="500">
                    <VerticalStackLayout Padding="25,10,25,20"
                                        Spacing="15">

                        <!-- Header -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Privacy Policy &amp; Terms"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#1E3A5F"
                                   HorizontalOptions="Center"/>

                            <BoxView HeightRequest="3"
                                     WidthRequest="60"
                                     BackgroundColor="#FFA500"
                                     HorizontalOptions="Center"
                                     CornerRadius="2"/>

                            <Label Text="Please review and accept to continue"
                                   FontSize="13"
                                   TextColor="#64748B"
                                   HorizontalOptions="Center"
                                   Margin="0,5,0,0"/>
                        </VerticalStackLayout>

                        <!-- POPIA Content -->
                        <Border StrokeThickness="0"
                                BackgroundColor="#F5F5F5"
                                Padding="15"
                                StrokeShape="RoundRectangle 12"
                                Margin="0,10,0,0">
                            <VerticalStackLayout Spacing="12">

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="1. Information Collection"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="#1E3A5F"/>
                                    <Label Text="We collect personal information including your name, username, and location to provide you with access to opportunities in the Eastern Cape province."
                                           FontSize="13"
                                           TextColor="#444"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="2. Data Usage"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="#1E3A5F"/>
                                    <Label Text="Your information will be used to match you with relevant jobs, bursaries, internships, and training programs. We do not sell your data to third parties."
                                           FontSize="13"
                                           TextColor="#444"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="3. Data Security"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="#1E3A5F"/>
                                    <Label Text="We implement industry-standard security measures to protect your personal information from unauthorized access, disclosure, or modification."
                                           FontSize="13"
                                           TextColor="#444"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="4. Your Rights"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="#1E3A5F"/>
                                    <Label Text="You have the right to access, update, or delete your personal information at any time. Contact our support team for assistance."
                                           FontSize="13"
                                           TextColor="#444"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="5. Cookies &amp; Tracking"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="#1E3A5F"/>
                                    <Label Text="We use cookies to enhance your experience and analyze usage patterns. You can disable cookies in your browser settings."
                                           FontSize="13"
                                           TextColor="#444"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>

                            </VerticalStackLayout>
                        </Border>

                        <!-- Acceptance Notice -->
                        <Border StrokeThickness="1"
                                Stroke="#FFA500"
                                BackgroundColor="#FFF3E0"
                                Padding="12"
                                StrokeShape="RoundRectangle 10">
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="⚠️"
                                       FontSize="20"
                                       VerticalOptions="Start"/>
                                <Label Text="By accepting, you agree to our terms and confirm that you have read our privacy policy."
                                       FontSize="12"
                                       TextColor="#1E3A5F"
                                       LineBreakMode="WordWrap"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </Border>

                    </VerticalStackLayout>
                </ScrollView>

                <!-- Action Buttons -->
                <Grid Grid.Row="2"
                      ColumnDefinitions="*,*"
                      ColumnSpacing="12"
                      Padding="25,15,25,25"
                      BackgroundColor="White">

                    <Border Grid.Column="0"
                            StrokeThickness="2"
                            Stroke="#1E3A5F"
                            BackgroundColor="Transparent"
                            StrokeShape="RoundRectangle 12"
                            Padding="0"
                            HeightRequest="50">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding DeclineCommand}"/>
                        </Border.GestureRecognizers>
                        <Label Text="Decline"
                               TextColor="#1E3A5F"
                               FontSize="15"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Border>

                    <Button Grid.Column="1"
                            Text="Accept &amp; Continue"
                            BackgroundColor="#FFA500"
                            TextColor="White"
                            CornerRadius="12"
                            HeightRequest="50"
                            FontSize="15"
                            FontAttributes="Bold"
                            Command="{Binding AcceptCommand}"/>

                </Grid>

            </Grid>
        </Frame>

    </Grid>

</ContentPage>
